<!doctype html><html lang=ko dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Java]Spring Security 예외처리, 캐싱, 로깅 | 봄을 기다리는 낙엽</title>
<meta name=keywords content="exception,cache,logging"><meta name=description content="Spring Security의 기본 예외처리 및 캐싱, 로깅에 대해 알아봅니다."><meta name=author content="Leaf"><link rel=canonical href=https://leaf-nam.github.io/posts/spring_security/2/><meta name=google-site-verification content="l76eAEMadEn1QzS8fLTbrl8ppayZprvV3uuAbMGSy_c"><meta name=msvalidate.01 content="XYZabc"><meta name=naver-site-verification content="adff811404d441495a954e30579f40297ba14f5e"><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://leaf-nam.github.io/favicon.svg><link rel=icon type=image/png sizes=16x16 href=https://leaf-nam.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://leaf-nam.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://leaf-nam.github.io/apple-touch-icon.png><link rel=mask-icon href=https://leaf-nam.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ko href=https://leaf-nam.github.io/posts/spring_security/2/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-9PNFP00SSG"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9PNFP00SSG")}</script><meta property="og:url" content="https://leaf-nam.github.io/posts/spring_security/2/"><meta property="og:site_name" content="봄을 기다리는 낙엽"><meta property="og:title" content="[Java]Spring Security 예외처리, 캐싱, 로깅"><meta property="og:description" content="Spring Security의 기본 예외처리 및 캐싱, 로깅에 대해 알아봅니다."><meta property="og:locale" content="ko"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-11T21:36:48+09:00"><meta property="article:modified_time" content="2024-11-11T21:36:48+09:00"><meta property="article:tag" content="Exception"><meta property="article:tag" content="Cache"><meta property="article:tag" content="Logging"><meta name=twitter:card content="summary"><meta name=twitter:title content="[Java]Spring Security 예외처리, 캐싱, 로깅"><meta name=twitter:description content="Spring Security의 기본 예외처리 및 캐싱, 로깅에 대해 알아봅니다."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://leaf-nam.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Spring Security 파헤치기","item":"https://leaf-nam.github.io/posts/spring_security/"},{"@type":"ListItem","position":3,"name":"[Java]Spring Security 예외처리, 캐싱, 로깅","item":"https://leaf-nam.github.io/posts/spring_security/2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Java]Spring Security 예외처리, 캐싱, 로깅","name":"[Java]Spring Security 예외처리, 캐싱, 로깅","description":"Spring Security의 기본 예외처리 및 캐싱, 로깅에 대해 알아봅니다.","keywords":["exception","cache","logging"],"articleBody":"도입 지난 포스팅 [Java]Spring Security WebMVC 기본 구조 지난 시간의 기본 구조(링크)에 이어, Spring Security에서 제공하는 예외처리와 캐싱, 로깅에 대해 자세히 알아보겠습니다.\n현재 포스팅에서 다루는 부분이 로직상 핵심이 되는 것은 아니나, 이를 모르고 Spring Security를 사용하게 되면 다양한 기능을 제대로 활용할 수 없을 뿐 아니라 문제가 발생했을 때 디버깅하기 매우 어렵기 때문에 반드시 이해하고 구현으로 넘어가는 것을 추천드립니다.\n예외처리 Spring Security에서 처리하는 예외는 크게 2가지입니다.\nAuthenticationException : 인증 예외(401)1 AccessDeniedException : 인가 예외(403)2 이러한 오류를 받아서 처리하는 필터와 예외 객체에 대해 자세히 알아보도록 하겠습니다.\nExceptionTranslationFilter Security Filter Chain에는 ExceptionTranslationFilter가 기본으로 세팅되어 있습니다. ExceptionTranslationFilter는 하위 필터의 오류를 처리합니다.\n해당 필터는 위와 같이 인증이 필요한 요청 이전에 선언되어 해당 필터 다음의 요청에서 인증 및 인가 오류가 발생하면 이를 잡아서 처리하는 역할을 합니다.\n인증 객체가 없거나 AuthenticationException 오류 발생 시\nSecurityContextHolder 초기화 RequestCache에 현재 요청 저장 AuthenticationEntryPoint 실행 해당 처리과정이 복잡해서 아래에서 좀 더 자세히 다루겠습니다.\nAccessDenialException 오류 발생 시\n인증 객체가 있으면서 권한이 없는 경우입니다. AccessDeniedHandler에게 요청을 처리하도록 위임합니다. AccessDeniedHandler에서는 보통 403(Forbidden) 오류를 전송하여 권한이 부족함을 알립니다.3 AccessDenialException은 간단히 403 오류를 처리하는 로직만 작성하면 됩니다.\nAuthenticationException 인증 관련 오류가 발생하면 다음과 같은 순서로 처리됩니다.\nSecurityContextHolder 초기화 SecurityContext는 하나의 요청에 하나씩만 생성되는 보안 관련된 문맥입니다. 인증 객체가 들어있는 Container라고 생각해도 좋을 것 같습니다. ContextHolder는 이러한 Context 객체를 요청 처리 전반에서 전역적으로 사용할 수 있도록 들고 있습니다. 인증 객체 관련된 부분은 Spring Security에서 매우 핵심이기 때문에 다음 포스팅에서 다루겠습니다.\n인증 관련 오류가 발생했기 때문에, 현재 ContextHolder를 초기화해서 인증 현재의 객체를 더이상 사용할 수 없도록 만듭니다. RequestCache에 현재 요청정보 저장 사용자가 인증을 완료한 후, 현재 진행중이던 요청을 즉시 수행할 수 있도록 요청 정보를 캐시에 저장합니다. 캐싱 관련된 부분은 아래에서 자세히 다룰 예정입니다. AuthenticationEntryPoint 실행 보통 사용자가 다시 인증을 받을 수 있도록 401 오류와 함께 인증 요청을 전송합니다.4 예를 들어, 해당 사용자를 로그인 페이지로 Redirect하거나 토큰을 요청하는 등의 방식입니다. 캐싱 위에서 설명한 것처럼, 필터를 통과하는 과정에서 예외가 발생하면 현재 요청정보를 캐시에 저장합니다.\nHttpServletRequest 객체를 그대로 저장하기 때문에 원본 요청을 그대로 다시 수행할 수 있습니다.\n기본적으로는 HttpSessionRequestCache를 사용하기 때문에 HttpSession에서 저장된 요청을 꺼내올 수 있습니다.5 즉, 세션의 구현방식(InMemory, Redis 등) 에 따라 다양하게 캐싱이 가능합니다.\n세션에 저장하는 파라미터 이름은 다음과 같이 설정할 수 있습니다.(예시에서는 continue로 설정하고 있습니다.) @Bean DefaultSecurityFilterChain springSecurity(HttpSecurity http) throws Exception { HttpSessionRequestCache requestCache = new HttpSessionRequestCache(); requestCache.setMatchingRequestParameterName(\"continue\"); http // ... .requestCache((cache) -\u003e cache .requestCache(requestCache) ); return http.build(); } 이후, 저장된 Request 객체를 RequestCacheAwareFilter에서 사용하여 요청을 처리하도록 할 수 있습니다. 다음과 같이 인증 과정에서 요청을 저장하지 않게 설정하는 것도 가능합니다. @Bean SecurityFilterChain springSecurity(HttpSecurity http) throws Exception { RequestCache nullRequestCache = new NullRequestCache(); http // ... .requestCache((cache) -\u003e cache .requestCache(nullRequestCache) ); return http.build(); } 로깅 마지막으로, Spring Security는 DEBUG와 TRACE 레벨의 로깅을 지원하기 때문에, 디버깅에 많은 도움을 받을 수 있습니다.\n통상 보안을 위해 401이나 403오류가 발생하더라도 응답에는 오류 원인을 포함시키지 않습니다.\n만약 브라우저나 응답을 확인해도 인증관련 오류 원인을 찾기 힘들 때 로깅 레벨을 조정한 후 메시지를 확인하여 문제를 빠르게 해결하는 것이 가능합니다.\n아래는 공식문서의 예제인데, TRACE 메시지를 통해 필터의 진행경과를 확인할 수 있으며 DEBUG 메시지를 통해 CSRF와 관련된 오류로 403이 발생하였다는 것을 즉시 확인할 수 있습니다.\n2023-06-14T09:44:25.797-03:00 DEBUG 76975 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy : Securing POST /hello 2023-06-14T09:44:25.797-03:00 TRACE 76975 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy : Invoking DisableEncodeUrlFilter (1/15) 2023-06-14T09:44:25.798-03:00 TRACE 76975 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy : Invoking WebAsyncManagerIntegrationFilter (2/15) 2023-06-14T09:44:25.800-03:00 TRACE 76975 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy : Invoking SecurityContextHolderFilter (3/15) 2023-06-14T09:44:25.801-03:00 TRACE 76975 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy : Invoking HeaderWriterFilter (4/15) 2023-06-14T09:44:25.802-03:00 TRACE 76975 --- [nio-8080-exec-1] o.s.security.web.FilterChainProxy : Invoking CsrfFilter (5/15) 2023-06-14T09:44:25.814-03:00 DEBUG 76975 --- [nio-8080-exec-1] o.s.security.web.csrf.CsrfFilter : Invalid CSRF token found for http://localhost:8080/hello 2023-06-14T09:44:25.814-03:00 DEBUG 76975 --- [nio-8080-exec-1] o.s.s.w.access.AccessDeniedHandlerImpl : Responding with 403 status code 2023-06-14T09:44:25.814-03:00 TRACE 76975 --- [nio-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter : Not injecting HSTS header since it did not match request to [Is Secure] 결론 Spring Security는 예외 처리가 잘 분리되어 있고, 처리 과정에서 캐싱과 로깅이 잘 구현되어 있어 개발 및 디버깅하기 쉽다!\n다음 포스팅 [Java]Spring Security 인증(Authentication)과 인가(Authorization) References URL 게시일자 방문일자 작성자 HTTP Unauthorized - 2024.11.10. MDN HTTP Forbidden - 2024.11.10. MDN Spring Session Management - 2024.11.11. Spring Unauthorized : 인증 오류는 사용자를 확인할 수단(토큰, 아이디/패스워드, 세션ID 등)이 없거나, 잘못된 방법으로 요청을 시도했을 때 발생합니다.\nEx) 권한이 필요한 페이지에 권한 없는 사용자가 요청 시도 Ex) 잘못된 인증 토큰(서버에서 발행하지 않았거나, 만료 혹은 변조 등)으로 요청 시도 ↩︎ Forbidden : 인가 오류는 사용자가 해당 요청에 대한 권한이 불충분할 때 발생합니다.\nEx) 기본 유저가 관리자 권한이 필요한 요청을 시도 ↩︎ 403 오류는 인증을 다시 시도하더라도 해소되지 않기 때문에, 401과는 다르게 로그인을 다시 시도할 필요가 없습니다. ↩︎\nMDN의 401 오류 공식문서를 보면, 401 오류 발생시에는 반드시 WWW-Authenticate 헤더에 인증 방법을 1가지 이상 명시하여 반환해야 한다고 설명되어 있습니다. ↩︎\n처음에 해당 단락을 보면서 요청이 저장된다고 해도 동일한 브라우저임을 어떻게 검증하는지가 궁금했는데, 해당 페이지를 읽어보니 세션은 동일한 세션 ID(통상 JSESSIONID)를 저장하고 있기 때문에, 요청의 Cookie에 설정된 세션 ID를 통해 가져오기 때문에 동일한 브라우저임을 알 수 있다고 합니다. ↩︎\n","wordCount":"773","inLanguage":"ko","datePublished":"2024-11-11T21:36:48+09:00","dateModified":"2024-11-11T21:36:48+09:00","author":{"@type":"Person","name":"Leaf"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://leaf-nam.github.io/posts/spring_security/2/"},"publisher":{"@type":"Organization","name":"봄을 기다리는 낙엽","logo":{"@type":"ImageObject","url":"https://leaf-nam.github.io/favicon.svg"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://leaf-nam.github.io/ accesskey=h title="LEAF (Alt + H)">LEAF</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://leaf-nam.github.io/search/ title=검색><span>검색</span></a></li><li><a href=https://leaf-nam.github.io/posts/ title=게시글><span>게시글</span></a></li><li><a href=https://leaf-nam.github.io/tips/ title=미세팁><span>미세팁</span></a></li><li><a href=https://leaf-nam.github.io/archives/ title=아카이브><span>아카이브</span></a></li><li><a href=https://leaf-nam.github.io/cote/ title=알고리즘><span>알고리즘</span></a></li><li><a href=https://leaf-nam.github.io/review/ title="책 리뷰"><span>책 리뷰</span></a></li><li><a href=https://leaf-nam.github.io/categories/ title=카테고리><span>카테고리</span></a></li><li><a href=https://leaf-nam.github.io/tags/ title=태그><span>태그</span></a></li><li><a href=https://github.com/leaf-nam/blog title=Git><span>Git</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://leaf-nam.github.io/>홈</a>&nbsp;»&nbsp;<a href=https://leaf-nam.github.io/posts/>Posts</a>&nbsp;»&nbsp;<a href=https://leaf-nam.github.io/posts/spring_security/>Spring Security 파헤치기</a></div><h1 class="post-title entry-hint-parent">[Java]Spring Security 예외처리, 캐싱, 로깅</h1><div class=post-description>Spring Security의 기본 예외처리 및 캐싱, 로깅에 대해 알아봅니다.</div><div class=post-meta><span title='2024-11-11 21:36:48 +0900 KST'>2024. 11. 11.</span>&nbsp;·&nbsp;4 분&nbsp;·&nbsp;773 단어&nbsp;·&nbsp;Leaf&nbsp;|&nbsp;<a href=https://github.com/leaf-nam/blog/blob/main/content/ rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>목차</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#도입>도입</a><ul><li><a href=#지난-포스팅>지난 포스팅</a></li></ul></li><li><a href=#예외처리>예외처리</a><ul><li><a href=#exceptiontranslationfilter>ExceptionTranslationFilter</a></li><li><a href=#authenticationexception>AuthenticationException</a></li><li><a href=#캐싱>캐싱</a></li><li><a href=#로깅>로깅</a></li></ul></li><li><a href=#결론>결론</a><ul><li><a href=#다음-포스팅>다음 포스팅</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><h2 id=도입>도입<a hidden class=anchor aria-hidden=true href=#도입>#</a></h2><h3 id=지난-포스팅>지난 포스팅<a hidden class=anchor aria-hidden=true href=#지난-포스팅>#</a></h3><ul><li><a href=https://leaf-nam.github.io/posts/spring_security/1/>[Java]Spring Security WebMVC 기본 구조</a></li></ul><p>지난 시간의 기본 구조(링크)에 이어, Spring Security에서 제공하는 예외처리와 캐싱, 로깅에 대해 자세히 알아보겠습니다.</p><blockquote><p>현재 포스팅에서 다루는 부분이 로직상 핵심이 되는 것은 아니나, 이를 모르고 Spring Security를 사용하게 되면 다양한 기능을 제대로 활용할 수 없을 뿐 아니라 문제가 발생했을 때 디버깅하기 매우 어렵기 때문에 반드시 이해하고 구현으로 넘어가는 것을 추천드립니다.</p></blockquote><h2 id=예외처리>예외처리<a hidden class=anchor aria-hidden=true href=#예외처리>#</a></h2><p>Spring Security에서 처리하는 예외는 크게 2가지입니다.</p><ul><li>AuthenticationException : 인증 예외(401)<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li><li>AccessDeniedException : 인가 예외(403)<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup></li></ul><p>이러한 오류를 받아서 처리하는 필터와 예외 객체에 대해 자세히 알아보도록 하겠습니다.</p><h3 id=exceptiontranslationfilter>ExceptionTranslationFilter<a hidden class=anchor aria-hidden=true href=#exceptiontranslationfilter>#</a></h3><ul><li><a href=https://leaf-nam.github.io/posts/spring_security/spring_security_webmvc_base_architecture/#spring-security-%ED%95%84%ED%84%B0>Security Filter Chain</a>에는 ExceptionTranslationFilter가 기본으로 세팅되어 있습니다.</li></ul><figure><img loading=lazy src=exceptionTranslationFilter.png alt="ExceptionTranslationFilter는 하위 필터의 오류를 처리합니다."><figcaption><p>ExceptionTranslationFilter는 하위 필터의 오류를 처리합니다.</p></figcaption></figure><p>해당 필터는 위와 같이 인증이 필요한 요청 이전에 선언되어 해당 필터 다음의 요청에서 인증 및 인가 오류가 발생하면 이를 잡아서 처리하는 역할을 합니다.</p><ul><li><p><strong>인증 객체가 없거나 AuthenticationException 오류 발생 시</strong></p><ol><li>SecurityContextHolder 초기화</li><li>RequestCache에 현재 요청 저장</li><li>AuthenticationEntryPoint 실행<blockquote><p>해당 처리과정이 복잡해서 <a href=#authenticationexception>아래</a>에서 좀 더 자세히 다루겠습니다.</p></blockquote></li></ol></li><li><p><strong>AccessDenialException 오류 발생 시</strong></p><ul><li>인증 객체가 있으면서 권한이 없는 경우입니다.</li><li>AccessDeniedHandler에게 요청을 처리하도록 위임합니다.</li><li>AccessDeniedHandler에서는 보통 403(Forbidden) 오류를 전송하여 권한이 부족함을 알립니다.<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup><blockquote><p>AccessDenialException은 간단히 403 오류를 처리하는 로직만 작성하면 됩니다.</p></blockquote></li></ul></li></ul><h3 id=authenticationexception>AuthenticationException<a hidden class=anchor aria-hidden=true href=#authenticationexception>#</a></h3><p>인증 관련 오류가 발생하면 다음과 같은 순서로 처리됩니다.</p><ol><li><strong>SecurityContextHolder 초기화</strong></li></ol><ul><li>SecurityContext는 하나의 요청에 하나씩만 생성되는 보안 관련된 문맥입니다. 인증 객체가 들어있는 Container라고 생각해도 좋을 것 같습니다.</li><li>ContextHolder는 이러한 Context 객체를 요청 처리 전반에서 전역적으로 사용할 수 있도록 들고 있습니다.<blockquote><p>인증 객체 관련된 부분은 Spring Security에서 매우 핵심이기 때문에 다음 포스팅에서 다루겠습니다.</p></blockquote></li><li>인증 관련 오류가 발생했기 때문에, 현재 ContextHolder를 초기화해서 인증 현재의 객체를 더이상 사용할 수 없도록 만듭니다.</li></ul><ol start=2><li><strong>RequestCache에 현재 요청정보 저장</strong></li></ol><ul><li>사용자가 인증을 완료한 후, 현재 진행중이던 요청을 즉시 수행할 수 있도록 요청 정보를 캐시에 저장합니다.</li><li>캐싱 관련된 부분은 <a href=#%EC%BA%90%EC%8B%B1>아래</a>에서 자세히 다룰 예정입니다.</li></ul><ol start=3><li><strong>AuthenticationEntryPoint 실행</strong></li></ol><ul><li>보통 사용자가 다시 인증을 받을 수 있도록 401 오류와 함께 인증 요청을 전송합니다.<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup></li><li>예를 들어, 해당 사용자를 로그인 페이지로 Redirect하거나 토큰을 요청하는 등의 방식입니다.</li></ul><h3 id=캐싱>캐싱<a hidden class=anchor aria-hidden=true href=#캐싱>#</a></h3><p>위에서 설명한 것처럼, 필터를 통과하는 과정에서 예외가 발생하면 현재 요청정보를 캐시에 저장합니다.</p><blockquote><p>HttpServletRequest 객체를 그대로 저장하기 때문에 원본 요청을 그대로 다시 수행할 수 있습니다.</p></blockquote><ul><li>기본적으로는 HttpSessionRequestCache를 사용하기 때문에 HttpSession에서 저장된 요청을 꺼내올 수 있습니다.<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup><blockquote><p>즉, 세션의 구현방식(InMemory, Redis 등) 에 따라 다양하게 캐싱이 가능합니다.</p></blockquote></li><li>세션에 저장하는 파라미터 이름은 다음과 같이 설정할 수 있습니다.(예시에서는 continue로 설정하고 있습니다.)<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>DefaultSecurityFilterChain</span><span class=w> </span><span class=nf>springSecurity</span><span class=p>(</span><span class=n>HttpSecurity</span><span class=w> </span><span class=n>http</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>HttpSessionRequestCache</span><span class=w> </span><span class=n>requestCache</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>HttpSessionRequestCache</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>requestCache</span><span class=p>.</span><span class=na>setMatchingRequestParameterName</span><span class=p>(</span><span class=s>&#34;continue&#34;</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>.</span><span class=na>requestCache</span><span class=p>((</span><span class=n>cache</span><span class=p>)</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>			</span><span class=p>.</span><span class=na>requestCache</span><span class=p>(</span><span class=n>requestCache</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>		</span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>return</span><span class=w> </span><span class=n>http</span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div></li><li>이후, 저장된 Request 객체를 RequestCacheAwareFilter에서 사용하여 요청을 처리하도록 할 수 있습니다.</li><li>다음과 같이 인증 과정에서 요청을 저장하지 않게 설정하는 것도 가능합니다.<div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@Bean</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>SecurityFilterChain</span><span class=w> </span><span class=nf>springSecurity</span><span class=p>(</span><span class=n>HttpSecurity</span><span class=w> </span><span class=n>http</span><span class=p>)</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>Exception</span><span class=w> </span><span class=p>{</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>RequestCache</span><span class=w> </span><span class=n>nullRequestCache</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>new</span><span class=w> </span><span class=n>NullRequestCache</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=n>http</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=c1>// ...</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>.</span><span class=na>requestCache</span><span class=p>((</span><span class=n>cache</span><span class=p>)</span><span class=w> </span><span class=o>-&gt;</span><span class=w> </span><span class=n>cache</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=p>.</span><span class=na>requestCache</span><span class=p>(</span><span class=n>nullRequestCache</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=n>http</span><span class=p>.</span><span class=na>build</span><span class=p>();</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>}</span><span class=w>
</span></span></span></code></pre></div></li></ul><h3 id=로깅>로깅<a hidden class=anchor aria-hidden=true href=#로깅>#</a></h3><p>마지막으로, Spring Security는 DEBUG와 TRACE 레벨의 로깅을 지원하기 때문에, 디버깅에 많은 도움을 받을 수 있습니다.</p><blockquote><p>통상 보안을 위해 401이나 403오류가 발생하더라도 응답에는 오류 원인을 포함시키지 않습니다.</p></blockquote><p>만약 브라우저나 응답을 확인해도 인증관련 오류 원인을 찾기 힘들 때 로깅 레벨을 조정한 후 메시지를 확인하여 문제를 빠르게 해결하는 것이 가능합니다.</p><p>아래는 공식문서의 예제인데, <strong>TRACE 메시지</strong>를 통해 필터의 진행경과를 확인할 수 있으며 <strong>DEBUG 메시지</strong>를 통해 CSRF와 관련된 오류로 403이 발생하였다는 것을 즉시 확인할 수 있습니다.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>797</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>DEBUG</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>web</span><span class=p>.</span><span class=na>FilterChainProxy</span><span class=w>        </span><span class=p>:</span><span class=w> </span><span class=n>Securing</span><span class=w> </span><span class=n>POST</span><span class=w> </span><span class=o>/</span><span class=n>hello</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>797</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>TRACE</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>web</span><span class=p>.</span><span class=na>FilterChainProxy</span><span class=w>        </span><span class=p>:</span><span class=w> </span><span class=n>Invoking</span><span class=w> </span><span class=nf>DisableEncodeUrlFilter</span><span class=w> </span><span class=p>(</span><span class=n>1</span><span class=o>/</span><span class=n>15</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>798</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>TRACE</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>web</span><span class=p>.</span><span class=na>FilterChainProxy</span><span class=w>        </span><span class=p>:</span><span class=w> </span><span class=n>Invoking</span><span class=w> </span><span class=nf>WebAsyncManagerIntegrationFilter</span><span class=w> </span><span class=p>(</span><span class=n>2</span><span class=o>/</span><span class=n>15</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>800</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>TRACE</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>web</span><span class=p>.</span><span class=na>FilterChainProxy</span><span class=w>        </span><span class=p>:</span><span class=w> </span><span class=n>Invoking</span><span class=w> </span><span class=nf>SecurityContextHolderFilter</span><span class=w> </span><span class=p>(</span><span class=n>3</span><span class=o>/</span><span class=n>15</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>801</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>TRACE</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>web</span><span class=p>.</span><span class=na>FilterChainProxy</span><span class=w>        </span><span class=p>:</span><span class=w> </span><span class=n>Invoking</span><span class=w> </span><span class=nf>HeaderWriterFilter</span><span class=w> </span><span class=p>(</span><span class=n>4</span><span class=o>/</span><span class=n>15</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>802</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>TRACE</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>web</span><span class=p>.</span><span class=na>FilterChainProxy</span><span class=w>        </span><span class=p>:</span><span class=w> </span><span class=n>Invoking</span><span class=w> </span><span class=nf>CsrfFilter</span><span class=w> </span><span class=p>(</span><span class=n>5</span><span class=o>/</span><span class=n>15</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>814</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>DEBUG</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>security</span><span class=p>.</span><span class=na>web</span><span class=p>.</span><span class=na>csrf</span><span class=p>.</span><span class=na>CsrfFilter</span><span class=w>         </span><span class=p>:</span><span class=w> </span><span class=n>Invalid</span><span class=w> </span><span class=n>CSRF</span><span class=w> </span><span class=n>token</span><span class=w> </span><span class=n>found</span><span class=w> </span><span class=k>for</span><span class=w> </span><span class=n>http</span><span class=p>:</span><span class=c1>//localhost:8080/hello</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>814</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>DEBUG</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>w</span><span class=p>.</span><span class=na>access</span><span class=p>.</span><span class=na>AccessDeniedHandlerImpl</span><span class=w>   </span><span class=p>:</span><span class=w> </span><span class=n>Responding</span><span class=w> </span><span class=n>with</span><span class=w> </span><span class=n>403</span><span class=w> </span><span class=n>status</span><span class=w> </span><span class=n>code</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>2023</span><span class=o>-</span><span class=n>06</span><span class=o>-</span><span class=n>14T09</span><span class=p>:</span><span class=n>44</span><span class=p>:</span><span class=n>25</span><span class=p>.</span><span class=na>814</span><span class=o>-</span><span class=n>03</span><span class=p>:</span><span class=n>00</span><span class=w> </span><span class=n>TRACE</span><span class=w> </span><span class=n>76975</span><span class=w> </span><span class=o>---</span><span class=w> </span><span class=o>[</span><span class=n>nio</span><span class=o>-</span><span class=n>8080</span><span class=o>-</span><span class=n>exec</span><span class=o>-</span><span class=n>1</span><span class=o>]</span><span class=w> </span><span class=n>o</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>s</span><span class=p>.</span><span class=na>w</span><span class=p>.</span><span class=na>header</span><span class=p>.</span><span class=na>writers</span><span class=p>.</span><span class=na>HstsHeaderWriter</span><span class=w>  </span><span class=p>:</span><span class=w> </span><span class=n>Not</span><span class=w> </span><span class=n>injecting</span><span class=w> </span><span class=n>HSTS</span><span class=w> </span><span class=n>header</span><span class=w> </span><span class=n>since</span><span class=w> </span><span class=n>it</span><span class=w> </span><span class=n>did</span><span class=w> </span><span class=n>not</span><span class=w> </span><span class=n>match</span><span class=w> </span><span class=n>request</span><span class=w> </span><span class=n>to</span><span class=w> </span><span class=o>[</span><span class=n>Is</span><span class=w> </span><span class=n>Secure</span><span class=o>]</span><span class=w>
</span></span></span></code></pre></div><h2 id=결론>결론<a hidden class=anchor aria-hidden=true href=#결론>#</a></h2><p><strong>Spring Security는 예외 처리가 잘 분리되어 있고, 처리 과정에서 캐싱과 로깅이 잘 구현되어 있어 개발 및 디버깅하기 쉽다!</strong></p><h3 id=다음-포스팅>다음 포스팅<a hidden class=anchor aria-hidden=true href=#다음-포스팅>#</a></h3><ul><li><a href=https://leaf-nam.github.io/posts/spring_security/3>[Java]Spring Security 인증(Authentication)과 인가(Authorization)</a></li></ul><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><table><thead><tr><th style=text-align:left>URL</th><th style=text-align:left>게시일자</th><th style=text-align:left>방문일자</th><th style=text-align:left>작성자</th></tr></thead><tbody><tr><td style=text-align:left><a href=https://developer.mozilla.org/ko/docs/Web/HTTP/Status/401>HTTP Unauthorized</a></td><td style=text-align:left>-</td><td style=text-align:left>2024.11.10.</td><td style=text-align:left>MDN</td></tr><tr><td style=text-align:left><a href=https://developer.mozilla.org/ko/docs/Web/HTTP/Status/401>HTTP Forbidden</a></td><td style=text-align:left>-</td><td style=text-align:left>2024.11.10.</td><td style=text-align:left>MDN</td></tr><tr><td style=text-align:left><a href=https://docs.spring.io/spring-security/reference/servlet/appendix/faq.html#_session_management>Spring Session Management</a></td><td style=text-align:left>-</td><td style=text-align:left>2024.11.11.</td><td style=text-align:left>Spring</td></tr></tbody></table><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://developer.mozilla.org/ko/docs/Web/HTTP/Status/401>Unauthorized</a> : 인증 오류는 사용자를 확인할 수단(토큰, 아이디/패스워드, 세션ID 등)이 없거나, 잘못된 방법으로 요청을 시도했을 때 발생합니다.</p><ul><li>Ex) 권한이 필요한 페이지에 권한 없는 사용자가 요청 시도</li><li>Ex) 잘못된 인증 토큰(서버에서 발행하지 않았거나, 만료 혹은 변조 등)으로 요청 시도</li></ul>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></li><li id=fn:2><p><a href=https://developer.mozilla.org/ko/docs/Web/HTTP/Status/403>Forbidden</a> : 인가 오류는 사용자가 해당 요청에 대한 권한이 불충분할 때 발생합니다.</p><ul><li>Ex) 기본 유저가 관리자 권한이 필요한 요청을 시도</li></ul>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></li><li id=fn:3><p>403 오류는 인증을 다시 시도하더라도 해소되지 않기 때문에, 401과는 다르게 로그인을 다시 시도할 필요가 없습니다.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p><a href=https://developer.mozilla.org/ko/docs/Web/HTTP/Status/401>MDN의 401 오류 공식문서</a>를 보면, 401 오류 발생시에는 반드시 WWW-Authenticate 헤더에 인증 방법을 1가지 이상 명시하여 반환해야 한다고 설명되어 있습니다.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>처음에 해당 단락을 보면서 요청이 저장된다고 해도 동일한 브라우저임을 어떻게 검증하는지가 궁금했는데, <a href=https://docs.spring.io/spring-security/reference/servlet/appendix/faq.html#_session_management>해당 페이지</a>를 읽어보니 세션은 동일한 세션 ID(통상 JSESSIONID)를 저장하고 있기 때문에, 요청의 Cookie에 설정된 세션 ID를 통해 가져오기 때문에 동일한 브라우저임을 알 수 있다고 합니다.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://leaf-nam.github.io/tags/exception/>Exception</a></li><li><a href=https://leaf-nam.github.io/tags/cache/>Cache</a></li><li><a href=https://leaf-nam.github.io/tags/logging/>Logging</a></li></ul><nav class=paginav><a class=prev href=https://leaf-nam.github.io/cote/hackerrank_non_divisible_subset/><span class=title>« 이전 페이지</span><br><span>[Java]HackerRank Non Divisible Subset</span>
</a><a class=next href=https://leaf-nam.github.io/cote/programmers_84512/><span class=title>다음 페이지 »</span><br><span>[Java]Programmers 모음 사전</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share [Java]Spring Security 예외처리, 캐싱, 로깅 on x" href="https://x.com/intent/tweet/?text=%5bJava%5dSpring%20Security%20%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac%2c%20%ec%ba%90%ec%8b%b1%2c%20%eb%a1%9c%ea%b9%85&amp;url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f&amp;hashtags=exception%2ccache%2clogging"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [Java]Spring Security 예외처리, 캐싱, 로깅 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f&amp;title=%5bJava%5dSpring%20Security%20%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac%2c%20%ec%ba%90%ec%8b%b1%2c%20%eb%a1%9c%ea%b9%85&amp;summary=%5bJava%5dSpring%20Security%20%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac%2c%20%ec%ba%90%ec%8b%b1%2c%20%eb%a1%9c%ea%b9%85&amp;source=https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [Java]Spring Security 예외처리, 캐싱, 로깅 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f&title=%5bJava%5dSpring%20Security%20%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac%2c%20%ec%ba%90%ec%8b%b1%2c%20%eb%a1%9c%ea%b9%85"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [Java]Spring Security 예외처리, 캐싱, 로깅 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [Java]Spring Security 예외처리, 캐싱, 로깅 on whatsapp" href="https://api.whatsapp.com/send?text=%5bJava%5dSpring%20Security%20%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac%2c%20%ec%ba%90%ec%8b%b1%2c%20%eb%a1%9c%ea%b9%85%20-%20https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [Java]Spring Security 예외처리, 캐싱, 로깅 on telegram" href="https://telegram.me/share/url?text=%5bJava%5dSpring%20Security%20%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac%2c%20%ec%ba%90%ec%8b%b1%2c%20%eb%a1%9c%ea%b9%85&amp;url=https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share [Java]Spring Security 예외처리, 캐싱, 로깅 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%5bJava%5dSpring%20Security%20%ec%98%88%ec%99%b8%ec%b2%98%eb%a6%ac%2c%20%ec%ba%90%ec%8b%b1%2c%20%eb%a1%9c%ea%b9%85&u=https%3a%2f%2fleaf-nam.github.io%2fposts%2fspring_security%2f2%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://utteranc.es/client.js repo=leaf-nam/leaf-nam.github.io issue-term=title theme=boxy-light crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://leaf-nam.github.io/>봄을 기다리는 낙엽</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="복사";function s(){t.innerHTML="복사 완료!",setTimeout(()=>{t.innerHTML="복사"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>